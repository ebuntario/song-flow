[
  {
    "id": "TC001",
    "title": "TikTok OAuth Login Success",
    "description": "Verify that a user can successfully log in using TikTok OAuth and an authenticated session is created.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to the login page."
      },
      {
        "type": "action",
        "description": "Click the 'Login with TikTok' button."
      },
      {
        "type": "assertion",
        "description": "Confirm redirection to TikTok OAuth consent screen."
      },
      {
        "type": "action",
        "description": "Provide valid TikTok credentials and consent."
      },
      {
        "type": "assertion",
        "description": "Verify user is redirected back to the app dashboard."
      },
      {
        "type": "assertion",
        "description": "Check that a valid authenticated session exists with correct user identity."
      }
    ]
  },
  {
    "id": "TC002",
    "title": "Spotify OAuth Integration Success",
    "description": "Verify that a logged-in user can connect their Spotify account successfully via OAuth.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Log in with TikTok OAuth and navigate to Spotify connection prompt."
      },
      {
        "type": "action",
        "description": "Initiate Spotify OAuth and provide valid Spotify credentials."
      },
      {
        "type": "assertion",
        "description": "Confirm successful connection and retrieval of Spotify access tokens."
      },
      {
        "type": "assertion",
        "description": "Verify that Spotify playback control API calls can be made with the token."
      }
    ]
  },
  {
    "id": "TC003",
    "title": "WebSocket Connection to TikTok Live Chat",
    "description": "Verify the backend establishes and maintains a stable WebSocket connection to TikTok Live chat.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Start a live session and connect the backend to the TikTok Live chat via WebSocket."
      },
      {
        "type": "assertion",
        "description": "Confirm connection is established successfully without errors."
      },
      {
        "type": "assertion",
        "description": "Simulate network interruption and verify automatic reconnection logic."
      },
      {
        "type": "assertion",
        "description": "Check that no message backlog is lost or duplicated upon reconnection."
      }
    ]
  },
  {
    "id": "TC004",
    "title": "Parse !play Command and Enqueue Song Successfully",
    "description": "Verify the system correctly parses a !play song request command from chat and queues the corresponding Spotify track.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Send a chat message with '!play Shape of You' in the TikTok Live chat."
      },
      {
        "type": "assertion",
        "description": "Check that the command parser identifies the !play command and extracts the song title."
      },
      {
        "type": "assertion",
        "description": "Verify the system searches Spotify Web API for the requested song."
      },
      {
        "type": "assertion",
        "description": "Confirm the found track is queued to the streamer's Spotify playback device."
      },
      {
        "type": "assertion",
        "description": "Assert that the dashboard queue is updated in real time with the new song and requester."
      }
    ]
  },
  {
    "id": "TC005",
    "title": "Parse !skip Command and Skip Current Track",
    "description": "Verify that when a !skip command is received from an authorized source, the system skips the current Spotify track.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Send a '!skip' command from the streamer's authorized account in TikTok Live chat."
      },
      {
        "type": "assertion",
        "description": "Confirm the command parser detects the !skip command."
      },
      {
        "type": "assertion",
        "description": "Verify the current playback track is skipped on Spotify."
      },
      {
        "type": "assertion",
        "description": "Check the dashboard updates to show the new current track."
      }
    ]
  },
  {
    "id": "TC006",
    "title": "Handle Invalid Command Gracefully",
    "description": "Verify the system ignores or returns error messages for unsupported or malformed commands from chat.",
    "category": "error handling",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Send an unsupported command '!dance' from a viewer in TikTok Live chat."
      },
      {
        "type": "assertion",
        "description": "Confirm the command parser does not trigger any song request processing."
      },
      {
        "type": "assertion",
        "description": "Verify an informative error message or no response is given to the chat or dashboard."
      }
    ]
  },
  {
    "id": "TC007",
    "title": "Enforce Per-User Request Rate Limiting",
    "description": "Verify that viewers are limited in the number of song requests they can make within a cooldown period and are notified upon exceeding limits.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "From a single viewer account, send song request commands repeatedly exceeding configured max requests."
      },
      {
        "type": "assertion",
        "description": "Confirm that after crossing the limit, subsequent requests are rejected."
      },
      {
        "type": "assertion",
        "description": "Verify the viewer receives a cooldown or rate limit warning message in chat."
      },
      {
        "type": "assertion",
        "description": "Check that rejected requests do not affect the playback queue or analytics."
      }
    ]
  },
  {
    "id": "TC008",
    "title": "Content Filtering: Explicit Content Toggle",
    "description": "Verify that when the explicit content toggle is off, explicit songs are not allowed to be queued from viewer requests.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Set the explicit content toggle to off in the streamer settings."
      },
      {
        "type": "action",
        "description": "Send a song request command for a known explicit song via chat."
      },
      {
        "type": "assertion",
        "description": "Confirm the song is identified as explicit and is rejected."
      },
      {
        "type": "assertion",
        "description": "Verify that a notification about explicit content being disallowed is sent to the requester."
      },
      {
        "type": "assertion",
        "description": "Check the song is not added to the playback queue or dashboard."
      }
    ]
  },
  {
    "id": "TC009",
    "title": "Content Filtering: Banned Words and Users Enforcement",
    "description": "Verify that requests from users on the banned users list or containing banned words are rejected and logged.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Add specific users and banned words to the configurable lists in streamer settings."
      },
      {
        "type": "action",
        "description": "From a banned user, send a valid song request command."
      },
      {
        "type": "action",
        "description": "Send a request command containing banned words from a non-banned user."
      },
      {
        "type": "assertion",
        "description": "Verify both requests are rejected without being queued."
      },
      {
        "type": "assertion",
        "description": "Confirm notifications or error messages regarding banned status are sent."
      },
      {
        "type": "assertion",
        "description": "Check that these incidents are recorded in moderation logs or analytics."
      }
    ]
  },
  {
    "id": "TC010",
    "title": "Dashboard: Display Live Session and Queue Updates in Real-Time",
    "description": "Verify the dashboard receives and displays real-time updates of the current track, queue list including requester names, and session stats without delay.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Start a live song request session and queue multiple songs."
      },
      {
        "type": "assertion",
        "description": "Verify that the dashboard shows accurate now playing track details."
      },
      {
        "type": "assertion",
        "description": "Confirm the queue list updates promptly with each new song and requester information."
      },
      {
        "type": "assertion",
        "description": "Check that viewer analytics, request counts, and session stats update dynamically."
      },
      {
        "type": "action",
        "description": "Skip the current track and verify dashboard updates accordingly."
      }
    ]
  },
  {
    "id": "TC011",
    "title": "Manual Queue Controls from Dashboard",
    "description": "Verify streamers can manually skip tracks and manage the queue from the dashboard controls.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Log in as a streamer and open the dashboard queue management page."
      },
      {
        "type": "action",
        "description": "Click the 'Skip Track' button to skip the current song."
      },
      {
        "type": "assertion",
        "description": "Confirm the current playing track is skipped on Spotify playback."
      },
      {
        "type": "action",
        "description": "Remove a queued song from the queue list via dashboard UI."
      },
      {
        "type": "assertion",
        "description": "Verify the song is removed from the queue and playback backend."
      }
    ]
  },
  {
    "id": "TC012",
    "title": "Overlay Display Shows Now Playing and Upcoming Tracks",
    "description": "Verify that the overlay page used in OBS or TikTok Live Studio displays the current and next songs correctly and updates in real time.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Start a live session and queue several songs."
      },
      {
        "type": "assertion",
        "description": "Verify the overlay displays the now playing track information correctly."
      },
      {
        "type": "assertion",
        "description": "Confirm the overlay also shows the upcoming queue list in order."
      },
      {
        "type": "assertion",
        "description": "Check that real-time WebSocket updates reflect changes in playback or queue promptly."
      }
    ]
  },
  {
    "id": "TC013",
    "title": "Security: Ensure HTTPS/WSS Communication and JWT Authorization",
    "description": "Verify all client-server communication uses HTTPS and WebSocket Secure (WSS), and actions are authorized via JWT tokens.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Initiate login and interactions with dashboard and WebSocket services."
      },
      {
        "type": "assertion",
        "description": "Confirm all HTTP requests are over HTTPS."
      },
      {
        "type": "assertion",
        "description": "Verify WebSocket connections use WSS protocol."
      },
      {
        "type": "assertion",
        "description": "Check presence and validation of JWT tokens in API and WebSocket requests."
      },
      {
        "type": "action",
        "description": "Attempt unauthorized API calls without tokens or with invalid JWT."
      },
      {
        "type": "assertion",
        "description": "Confirm that unauthorized requests are denied with appropriate errors."
      }
    ]
  },
  {
    "id": "TC014",
    "title": "Spotify Access Token Refresh Handling",
    "description": "Verify the system correctly handles expiration and refresh of Spotify OAuth tokens without user interruption.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Simulate or wait for Spotify access token expiration."
      },
      {
        "type": "action",
        "description": "Trigger a playback control action requiring a valid token."
      },
      {
        "type": "assertion",
        "description": "Verify the system refreshes the token automatically using the refresh token."
      },
      {
        "type": "assertion",
        "description": "Confirm the playback control command executes successfully after token refresh."
      }
    ]
  },
  {
    "id": "TC015",
    "title": "Analytics Reporting Accuracy",
    "description": "Verify that analytics data on session engagement, viewer behavior, and request statistics are collected accurately and displayed correctly to streamers.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Conduct a live session with multiple viewers sending song requests."
      },
      {
        "type": "assertion",
        "description": "Verify all song requests, including requesters and timestamps, are logged accurately."
      },
      {
        "type": "assertion",
        "description": "Check analytics dashboards reflect correct total requests, top viewer lists, and engagement metrics."
      },
      {
        "type": "action",
        "description": "Skip and revoke some songs and verify analytics update accordingly."
      }
    ]
  },
  {
    "id": "TC016",
    "title": "Error Handling: Spotify API Failure",
    "description": "Verify the system handles Spotify API failures gracefully including search or queue addition errors without crashing or inconsistent state.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Simulate Spotify API failure or rate-limiting during a song search or add to queue."
      },
      {
        "type": "assertion",
        "description": "Confirm the system catches the error and notifies the streamer through the dashboard or toast notification."
      },
      {
        "type": "assertion",
        "description": "Verify the playback queue remains consistent and no invalid entries are created."
      },
      {
        "type": "assertion",
        "description": "Check that the viewer who requested the song is informed appropriately in chat or dashboard."
      }
    ]
  },
  {
    "id": "TC017",
    "title": "System Resilience: WebSocket Reconnection and State Recovery",
    "description": "Verify the system automatically attempts WebSocket reconnection on connection loss and recovers session state without data loss.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Forcefully disconnect the TikTok Live chat WebSocket connection."
      },
      {
        "type": "assertion",
        "description": "Verify automatic reconnection attempts are made without user intervention."
      },
      {
        "type": "assertion",
        "description": "Confirm session live state, queue, and stats are resynchronized after reconnection."
      },
      {
        "type": "assertion",
        "description": "Check no duplicate or missing song requests occur due to reconnection."
      }
    ]
  },
  {
    "id": "TC018",
    "title": "Session Persistence and Logout",
    "description": "Verify that user sessions persist correctly and that logging out destroys session and related tokens securely.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Log in via TikTok OAuth and establish a session."
      },
      {
        "type": "assertion",
        "description": "Verify session data is saved in the database and accessible on page reload."
      },
      {
        "type": "action",
        "description": "Perform logout action."
      },
      {
        "type": "assertion",
        "description": "Confirm session and authentication tokens are destroyed."
      },
      {
        "type": "assertion",
        "description": "Verify user is redirected to login page and cannot access protected routes without logging in again."
      }
    ]
  }
]
